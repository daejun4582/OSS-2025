<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>도서 추가</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="my.css" />
</head>

<body>
    <nav class="navbar navbar-dark bg-dark">
        <div class="container"><a class="navbar-brand" href="index.html">📚 도서관리</a></div>
    </nav>
    <main class="container my-4">
        <h1 class="h3 mb-3">도서 추가</h1>
        <form id="bookForm" novalidate>
            <div class="row g-3">
                <div class="col-md-6">
                    <label for="title" class="form-label">제목 <span class="text-danger">*</span></label>
                    <input type="text" id="title" class="form-control" required minlength="2" placeholder="예) 클린 코드" />
                    <div class="invalid-feedback">제목은 2자 이상 입력하세요.</div>
                </div>
                <div class="col-md-6">
                    <label for="author" class="form-label">저자 <span class="text-danger">*</span></label>
                    <input type="text" id="author" class="form-control" required minlength="2"
                        placeholder="예) 로버트 C. 마틴" />
                    <div class="invalid-feedback">저자는 2자 이상 입력하세요.</div>
                </div>
                <div class="col-md-6">
                    <label for="publisher" class="form-label">출판사 <span class="text-danger">*</span></label>
                    <input type="text" id="publisher" class="form-control" required placeholder="예) 인사이트" />
                    <div class="invalid-feedback">출판사를 입력하세요.</div>
                </div>
                <div class="col-md-3">
                    <label for="year" class="form-label">출판년도 <span class="text-danger">*</span></label>
                    <input type="number" id="year" class="form-control" required placeholder="예) 2013" />
                    <div class="invalid-feedback">올바른 4자리 연도를 입력하세요 (1900~2100).</div>
                </div>
                <div class="col-md-3">
                    <label for="isbn" class="form-label">ISBN(13자리) <span class="text-danger">*</span></label>
                    <input type="text" id="isbn" class="form-control" required placeholder="예) 9788966260959" />
                    <div class="invalid-feedback">하이픈 없이 13자리 숫자를 입력하세요.</div>
                </div>
                <div class="col-md-6">
                    <label for="category" class="form-label">분류</label>
                    <select id="category" class="form-select">
                        <option value="개발">개발</option>
                        <option value="데이터">데이터</option>
                        <option value="수학">수학</option>
                        <option value="기타">기타</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="price" class="form-label">가격(원)</label>
                    <input type="number" id="price" class="form-control" min="0" step="100" placeholder="예) 22000" />
                    <div class="invalid-feedback">가격은 0원 이상이어야 합니다.</div>
                </div>
            </div>
            <div class="d-flex gap-2 mt-4">
                <button class="btn btn-primary" type="submit">확인</button>
                <a class="btn btn-outline-secondary" href="index.html">취소</a>
            </div>
        </form>
    </main>

    <script>
        const form = document.getElementById('bookForm');
        form.addEventListener('submit', function (e) {
            e.preventDefault();
            let valid = true;

            const title = document.getElementById('title');
            if (!title.value || title.value.trim().length < 2) { title.classList.add('is-invalid'); valid = false; } else { title.classList.remove('is-invalid'); }

            const author = document.getElementById('author');
            if (!author.value || author.value.trim().length < 2) { author.classList.add('is-invalid'); valid = false; } else { author.classList.remove('is-invalid'); }

            const publisher = document.getElementById('publisher');
            if (!publisher.value.trim()) { publisher.classList.add('is-invalid'); valid = false; } else { publisher.classList.remove('is-invalid'); }

            const year = document.getElementById('year');
            const y = Number(year.value);
            if (!Number.isInteger(y) || y < 1900 || y > 2100 || year.value.length !== 4) { year.classList.add('is-invalid'); valid = false; } else { year.classList.remove('is-invalid'); }

            const isbn = document.getElementById('isbn');
            const isbnOk = /^\d{13}$/.test(isbn.value);
            if (!isbnOk) { isbn.classList.add('is-invalid'); valid = false; } else { isbn.classList.remove('is-invalid'); }

            const price = document.getElementById('price');
            if (price.value && Number(price.value) < 0) { price.classList.add('is-invalid'); valid = false; } else { price.classList.remove('is-invalid'); }

            if (valid) {
                alert('게시물이 추가됩니다');
                window.location.href = 'index.html';
            }
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>